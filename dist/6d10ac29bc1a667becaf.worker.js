(function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="da2a")})({"01f9":function(t,e,n){"use strict";var r=n("2d00"),a=n("5ca1"),i=n("2aba"),o=n("32e9"),s=n("84f2"),c=n("41a0"),u=n("7f20"),f=n("38fd"),l=n("2b4c")("iterator"),h=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",v="values",g=function(){return this};t.exports=function(t,e,n,y,m,b,w){c(n,e,y);var P,x,S,E=function(t){if(!h&&t in A)return A[t];switch(t){case p:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",k=m==v,T=!1,A=t.prototype,L=A[l]||A[d]||m&&A[m],_=L||E(m),M=m?k?E("entries"):_:void 0,j="Array"==e&&A.entries||L;if(j&&(S=f(j.call(new t)),S!==Object.prototype&&S.next&&(u(S,O,!0),r||"function"==typeof S[l]||o(S,l,g))),k&&L&&L.name!==v&&(T=!0,_=function(){return L.call(this)}),r&&!w||!h&&!T&&A[l]||o(A,l,_),s[e]=_,s[O]=g,m)if(P={values:k?_:E(v),keys:b?_:E(p),entries:M},w)for(x in P)x in A||i(A,x,P[x]);else a(a.P+a.F*(h||T),e,P);return P}},"09fa":function(t,e,n){var r=n("4588"),a=n("9def");t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=a(e);if(e!==n)throw RangeError("Wrong length!");return n}},"0a49":function(t,e,n){var r=n("9b43"),a=n("626a"),i=n("4bf8"),o=n("9def"),s=n("cd1c");t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,f=4==t,l=6==t,h=5==t||l,d=e||s;return function(e,s,p){for(var v,g,y=i(e),m=a(y),b=r(s,p,3),w=o(m.length),P=0,x=n?d(e,w):c?d(e,0):void 0;w>P;P++)if((h||P in m)&&(v=m[P],g=b(v,P,y),t))if(n)x[P]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return P;case 2:x.push(v)}else if(f)return!1;return l?-1:u||f?f:x}}},"0d58":function(t,e,n){var r=n("ce10"),a=n("e11e");t.exports=Object.keys||function(t){return r(t,a)}},"0f88":function(t,e,n){var r,a=n("7726"),i=n("32e9"),o=n("ca5a"),s=o("typed_array"),c=o("view"),u=!(!a.ArrayBuffer||!a.DataView),f=u,l=0,h=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(l<h)(r=a[d[l++]])?(i(r.prototype,s,!0),i(r.prototype,c,!0)):f=!1;t.exports={ABV:u,CONSTR:f,TYPED:s,VIEW:c}},1169:function(t,e,n){var r=n("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"11e9":function(t,e,n){var r=n("52a7"),a=n("4630"),i=n("6821"),o=n("6a99"),s=n("69a8"),c=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=i(t),e=o(e,!0),c)try{return u(t,e)}catch(t){}if(s(t,e))return a(!r.f.call(t,e),t[e])}},1495:function(t,e,n){var r=n("86cc"),a=n("cb7c"),i=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){a(t);var n,o=i(e),s=o.length,c=0;while(s>c)r.f(t,n=o[c++],e[n]);return t}},"230e":function(t,e,n){var r=n("d3f4"),a=n("7726").document,i=r(a)&&r(a.createElement);t.exports=function(t){return i?a.createElement(t):{}}},"23c6":function(t,e,n){var r=n("2d95"),a=n("2b4c")("toStringTag"),i="Arguments"==r(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),a))?n:i?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"27ee":function(t,e,n){var r=n("23c6"),a=n("2b4c")("iterator"),i=n("84f2");t.exports=n("8378").getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},"2aba":function(t,e,n){var r=n("7726"),a=n("32e9"),i=n("69a8"),o=n("ca5a")("src"),s="toString",c=Function[s],u=(""+c).split(s);n("8378").inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(i(n,"name")||a(n,"name",e)),t[e]!==n&&(c&&(i(n,o)||a(n,o,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[o]||c.call(this)})},"2aeb":function(t,e,n){var r=n("cb7c"),a=n("1495"),i=n("e11e"),o=n("613b")("IE_PROTO"),s=function(){},c="prototype",u=function(){var t,e=n("230e")("iframe"),r=i.length,a="<",o=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(a+"script"+o+"document.F=Object"+a+"/script"+o),t.close(),u=t.F;while(r--)delete u[c][i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[c]=r(t),n=new s,s[c]=null,n[o]=t):n=u(),void 0===e?n:a(n,e)}},"2b4c":function(t,e,n){var r=n("5537")("wks"),a=n("ca5a"),i=n("7726").Symbol,o="function"==typeof i,s=t.exports=function(t){return r[t]||(r[t]=o&&i[t]||(o?i:a)("Symbol."+t))};s.store=r},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},"32e9":function(t,e,n){var r=n("86cc"),a=n("4630");t.exports=n("9e1e")?function(t,e,n){return r.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},"33a4":function(t,e,n){var r=n("84f2"),a=n("2b4c")("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[a]===t)}},"36bd":function(t,e,n){"use strict";var r=n("4bf8"),a=n("77f1"),i=n("9def");t.exports=function(t){var e=r(this),n=i(e.length),o=arguments.length,s=a(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,u=void 0===c?n:a(c,n);while(u>s)e[s++]=t;return e}},"38fd":function(t,e,n){var r=n("69a8"),a=n("4bf8"),i=n("613b")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},"41a0":function(t,e,n){"use strict";var r=n("2aeb"),a=n("4630"),i=n("7f20"),o={};n("32e9")(o,n("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(o,{next:a(1,n)}),i(t,e+" Iterator")}},"456d":function(t,e,n){var r=n("4bf8"),a=n("0d58");n("5eda")("keys",function(){return function(t){return a(r(t))}})},4588:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5537:function(t,e,n){var r=n("8378"),a=n("7726"),i="__core-js_shared__",o=a[i]||(a[i]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},"55dd":function(t,e,n){"use strict";var r=n("5ca1"),a=n("d8e8"),i=n("4bf8"),o=n("79e5"),s=[].sort,c=[1,2,3];r(r.P+r.F*(o(function(){c.sort(void 0)})||!o(function(){c.sort(null)})||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),a(t))}})},"5ca1":function(t,e,n){var r=n("7726"),a=n("8378"),i=n("32e9"),o=n("2aba"),s=n("9b43"),c="prototype",u=function(t,e,n){var f,l,h,d,p=t&u.F,v=t&u.G,g=t&u.S,y=t&u.P,m=t&u.B,b=v?r:g?r[e]||(r[e]={}):(r[e]||{})[c],w=v?a:a[e]||(a[e]={}),P=w[c]||(w[c]={});for(f in v&&(n=e),n)l=!p&&b&&void 0!==b[f],h=(l?b:n)[f],d=m&&l?s(h,r):y&&"function"==typeof h?s(Function.call,h):h,b&&o(b,f,h,t&u.U),w[f]!=h&&i(w,f,d),y&&P[f]!=h&&(P[f]=h)};r.core=a,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"5cc5":function(t,e,n){var r=n("2b4c")("iterator"),a=!1;try{var i=[7][r]();i["return"]=function(){a=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var i=[7],o=i[r]();o.next=function(){return{done:n=!0}},i[r]=function(){return o},t(i)}catch(t){}return n}},"5eda":function(t,e,n){var r=n("5ca1"),a=n("8378"),i=n("79e5");t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",o)}},"613b":function(t,e,n){var r=n("5537")("keys"),a=n("ca5a");t.exports=function(t){return r[t]||(r[t]=a(t))}},"626a":function(t,e,n){var r=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},"63d9":function(t,e,n){n("ec30")("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},6821:function(t,e,n){var r=n("626a"),a=n("be13");t.exports=function(t){return r(a(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!r(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},7333:function(t,e,n){"use strict";var r=n("0d58"),a=n("2621"),i=n("52a7"),o=n("4bf8"),s=n("626a"),c=Object.assign;t.exports=!c||n("79e5")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r})?function(t,e){var n=o(t),c=arguments.length,u=1,f=a.f,l=i.f;while(c>u){var h,d=s(arguments[u++]),p=f?r(d).concat(f(d)):r(d),v=p.length,g=0;while(v>g)l.call(d,h=p[g++])&&(n[h]=d[h])}return n}:c},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var r=n("4588"),a=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?a(t+e,0):i(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"7a56":function(t,e,n){"use strict";var r=n("7726"),a=n("86cc"),i=n("9e1e"),o=n("2b4c")("species");t.exports=function(t){var e=r[t];i&&e&&!e[o]&&a.f(e,o,{configurable:!0,get:function(){return this}})}},"7f20":function(t,e,n){var r=n("86cc").f,a=n("69a8"),i=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},8378:function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,n){var r=n("cb7c"),a=n("c69a"),i=n("6a99"),o=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),a)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},9093:function(t,e,n){var r=n("ce10"),a=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},"9b43":function(t,e,n){var r=n("d8e8");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},"9c29":function(t,e,n){n("ec30")("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},"9c6c":function(t,e,n){var r=n("2b4c")("unscopables"),a=Array.prototype;void 0==a[r]&&n("32e9")(a,r,{}),t.exports=function(t){a[r][t]=!0}},"9def":function(t,e,n){var r=n("4588"),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},ac6a:function(t,e,n){for(var r=n("cadf"),a=n("0d58"),i=n("2aba"),o=n("7726"),s=n("32e9"),c=n("84f2"),u=n("2b4c"),f=u("iterator"),l=u("toStringTag"),h=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=a(d),v=0;v<p.length;v++){var g,y=p[v],m=d[y],b=o[y],w=b&&b.prototype;if(w&&(w[f]||s(w,f,h),w[l]||s(w,l,y),c[y]=h,m))for(g in r)w[g]||i(w,g,r[g],!0)}},ba92:function(t,e,n){"use strict";var r=n("4bf8"),a=n("77f1"),i=n("9def");t.exports=[].copyWithin||function(t,e){var n=r(this),o=i(n.length),s=a(t,o),c=a(e,o),u=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===u?o:a(u,o))-c,o-s),l=1;c<s&&s<c+f&&(l=-1,c+=f-1,s+=f-1);while(f-- >0)c in n?n[s]=n[c]:delete n[s],s+=l,c+=l;return n}},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,n){var r=n("6821"),a=n("9def"),i=n("77f1");t.exports=function(t){return function(e,n,o){var s,c=r(e),u=a(c.length),f=i(o,u);if(t&&n!=n){while(u>f)if(s=c[f++],s!=s)return!0}else for(;u>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},ca5a:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cadf:function(t,e,n){"use strict";var r=n("9c6c"),a=n("d53b"),i=n("84f2"),o=n("6821");t.exports=n("01f9")(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):a(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},cb7c:function(t,e,n){var r=n("d3f4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},cd1c:function(t,e,n){var r=n("e853");t.exports=function(t,e){return new(r(t))(e)}},ce10:function(t,e,n){var r=n("69a8"),a=n("6821"),i=n("c366")(!1),o=n("613b")("IE_PROTO");t.exports=function(t,e){var n,s=a(t),c=0,u=[];for(n in s)n!=o&&r(s,n)&&u.push(n);while(e.length>c)r(s,n=e[c++])&&(~i(u,n)||u.push(n));return u}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},da2a:function(t,e,n){"use strict";n.r(e);n("ac6a"),n("456d"),n("63d9"),n("9c29"),n("55dd"),n("f751");function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var o=3,s=.3,c=function(){function t(){r(this,t),this.data={treeReady:!1,candlesBinary:[],candlesParsed:[],averageBinary:[],averageParsed:[],firstEntry:0,lastResolution:0,start:null,width:null,last:{offset:0,end:0,resolution:0},tree:[]},this.params={empty:!1,candleWidths:[],defaultExposition:2592e3,fileSizes:{},resolutions:[],packetSize:0,dataRequestPending:!1,isInitialLoading:!0,needDropData:!1},this.requestInitialParams()}return i(t,[{key:"resetData",value:function(){Object.assign(this.data,{treeReady:!1,candlesBinary:[],candlesParsed:[],averageBinary:[],averageParsed:[],firstEntry:0,lastResolution:0,start:null,width:null,last:{offset:0,end:0,resolution:0},tree:[]}),Object.assign(this.params,{dataRequestPending:!1,isInitialLoading:!0,fileSizes:{},resolutions:[],empty:!1})}},{key:"requestInitialParams",value:function(){this.sendMessage("REQUEST_PARAMS",{inner:["candleWidths"],outer:["fileSizes","resolutions","packetSize"]})}},{key:"initialLoading",value:function(t){var e=this.params.fileSizes[t],n=0;this.params.isInitialLoading=!0,this.requestData(n,e-1,t)}},{key:"rebaseOffset",value:function(t,e){var n=this.params.fileSizes[e];return t<0?0:t>n-1?n-1:t}},{key:"rebaseEnd",value:function(t,e){return t>this.params.fileSizes[e]?this.params.fileSizes[e]:t}},{key:"append",value:function(t){this.data.treeReady=!1,this.params.dataRequestPending=!1,this.appendedData=["candleData"],this.data.candlesBinary=t.slice(0),this.data.candlesParsed.splice(0),this.params.needDropData&&(this.params.needDropData=!1),this.data.candlesParsed=this.data.candlesParsed.concat(this.parseChartData(this.data.candlesBinary)).sort(function(t,e){return t.timestamp-e.timestamp}),!0===this.params.isInitialLoading&&(this.appendedData.push("averageData"),this.data.averageBinary=t.slice(0),this.data.averageParsed=this.data.candlesParsed.slice(0),this.params.isInitialLoading=!1),this.makeTree(),this.sendMessage("APPENDED",{type:this.appendedData})}},{key:"parseEntity",value:function(t){return{timestamp:new Uint32Array(t,0,1)[0],volume:new Float32Array(t,4,1)[0],open:new Float32Array(t,8,1)[0],high:new Float32Array(t,12,1)[0],low:new Float32Array(t,16,1)[0],close:new Float32Array(t,20,1)[0],average:new Float32Array(t,24,1)[0]}}},{key:"parseChartData",value:function(t){for(var e=[],n=0,r=0;n<t.byteLength;n+=this.params.packetSize,r++)e[r]=this.parseEntity(t.slice(n,n+this.params.packetSize));return e}},{key:"makeTree",value:function(){var t=this;this.data.candlesParsed.length>0&&(this.data.start=this.data.candlesParsed[0].timestamp,this.data.end=this.data.candlesParsed[this.data.candlesParsed.length-1].timestamp,this.params.candleWidths.map(function(e){t.data.tree[e]=[];var n=null;t.data.candlesParsed.map(function(r){var a=r.timestamp-r.timestamp%e;n&&a===n.id?(n.low=r.low<n.low?r.low:n.low,n.high=r.high>n.high?r.high:n.high,n.close=r.close,n.volume+=r.volume):(n&&t.data.tree[e].push(n),n={id:a,timestamp:r.timestamp,open:r.open,low:r.low,high:r.high,close:r.close,volume:r.volume})}),n&&t.data.tree[e].push(n)}),this.data.treeReady=!0)}},{key:"findCandleWidthForUse",value:function(t,e){var n=e/o,r=null,a=0;return this.params.candleWidths.map(function(e){if(r){var i=Math.abs(Math.round(n-t/e));i<a&&(a=i,r=e)}else r=e,a=Math.abs(Math.round(n-t/e))}),r}},{key:"findAvailableResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:86400,e=this.params.resolutions.length;if(t>this.params.resolutions[e-1])return this.params.resolutions[e-1];for(var n=0,r=e;n<r;n++){if(t===this.params.resolutions[n]||t<this.params.resolutions[n]&&0===n)return this.params.resolutions[n];if(t<this.params.resolutions[n]&&n>0)return this.params.resolutions[n-1]}}},{key:"convertTimestampToPackage",value:function(t,e){return Math.ceil(t/e)*this.params.packetSize}},{key:"convertOffsetToPackage",value:function(t,e){var n=(new Date).getTime()/1e3,r=n-(t-this.params.defaultExposition),a=this.convertTimestampToPackage(r,e),i=this.params.fileSizes[e];return this.rebaseOffset(i-a,e)}},{key:"convertEndToPackage",value:function(t,e){var n=(new Date).getTime()/1e3,r=this.convertTimestampToPackage(n-t,e),a=this.params.fileSizes[e];return this.rebaseEnd(a-r,e)}},{key:"renderCandles",value:function(t,e,n,r){this.data.treeReady||this.makeTree();var a={low:null,high:null,maxVolume:null,width:null,candles:[],candlesPositivePath:[],candlesNegativePath:[],volumePath:[]},i=this.findCandleWidthForUse(e,n),o=n/e;a.width=i*o;var c=this.data.tree[i],u=0;if(c&&this.data.lastResolution===i){var f=c.length;t>this.data.start&&(u=-Math.floor((t-this.data.start)/i));for(var l=-u;l<f;l++){var h=c[l];if(!(h.timestamp<=t)){if(h.timestamp>t+e){f=l;break}u<0&&(u=l),(null==a.low||a.low>h.low)&&(a.low=h.low),(null==a.high||a.high<h.high)&&(a.high=h.high),(null==a.maxVolume||a.maxVolume<h.volume)&&(a.maxVolume=h.volume)}}u=Math.abs(u),null==f&&(f=c.length);var d=0;d=a.high!==a.low?r/(a.high-a.low):r/(1.1*a.high-a.low);var p=0;a.maxVolume>0&&(p=r*s/a.maxVolume);for(var v=i*o*.25,g=u;g<f;g++){var y=c[g],m=(y.timestamp-t)*o,b="M".concat(m," ").concat((a.high-y.low)*d," L").concat(m," ").concat((a.high-y.high)*d," "),w="M".concat(m-v," ").concat((a.high-y.close)*d,"\n           L").concat(m+v," ").concat((a.high-y.close)*d,"\n           L").concat(m+v," ").concat((a.high-y.open)*d,"\n           L").concat(m-v," ").concat((a.high-y.open)*d),P=Object.assign({},y);y.open<=y.close?(P.class="positive",P.candlePathIndex=a.candlesPositivePath.push(b+w)-1):(P.class="negative",P.candlePathIndex=a.candlesNegativePath.push(b+w)-1),P.volumePathIndex=a.volumePath.push("M".concat(m-v," ").concat(r-y.volume*p,"\n           L").concat(m+v," ").concat(r-y.volume*p,"\n           L").concat(m+v," ").concat(r,"\n           L").concat(m-v," ").concat(r))-1,P.x=m,a.candles.push(P)}}if(!this.params.isInitialLoading&&t>1&&(this.data.start>t||this.data.end<t+e||!c||this.data.lastResolution!==i)){var x=this.findAvailableResolution(i);x&&this.requestData(this.convertOffsetToPackage(t,x),this.convertEndToPackage(t+e,x)-1,x)}this.data.lastResolution!==i&&(this.params.needDropData=!0),this.data.lastResolution=i,this.sendMessage("RENDERED",{type:"candles",data:a})}},{key:"returnEmptyData",value:function(){this.sendMessage("RENDERED",{type:"candles",data:{candles:[],candlesPositivePath:[],candlesNegativePath:[],volumePath:[]}}),this.sendMessage("RENDERED",{type:"average",data:{minTimestamp:0,path:[]}})}},{key:"renderAverage",value:function(t,e){var n=this.data.averageParsed.length;if(n){var r=t/n,a={minTimestamp:this.data.averageParsed[0].timestamp-86400,maxTimestamp:this.data.averageParsed[n-1].timestamp,path:[]},i=this.data.averageParsed.slice(0).sort(function(t,e){return t.average-e.average}),o=i[n-1].average,s=i[0].average,c=0;o!==s&&(c=e/(o-s)),a.path.push("M0 ".concat(c*(o-this.data.averageParsed[0].average)));for(var u=1;u<n;u++)a.path.push("L".concat(r*u," ").concat(c*(o-this.data.averageParsed[u].average)));this.sendMessage("RENDERED",{type:"average",data:a})}}},{key:"requestData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.last.offset,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.data.last.end,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.data.last.resolution;!this.params.dataRequestPending&&e>0&&(this.data.last.offset!==t||this.data.last.end!==e||this.data.last.resolution!==n)&&(this.params.dataRequestPending=!0,Object.assign(this.data.last,{offset:t,end:e,resolution:n}),this.sendMessage("REQUEST_DATA",{offset:t,end:e,resolution:n}))}},{key:"setParams",value:function(t){t.candleWidths&&!this.isCandleWidthsTheSame(t.candleWidths)&&Object.assign(this.data,{treeReady:!1,candlesBinary:[],candlesParsed:[],firstEntry:0,lastResolution:0,start:null,width:null,tree:[],last:{offset:0,end:0,resolution:0}}),Object.assign(this.params,t)}},{key:"isCandleWidthsTheSame",value:function(t){for(var e=0,n=t.length;e<n;e++)if(-1===this.params.candleWidths.indexOf(t[e]))return!1;return!0}},{key:"messageHandler",value:function(t){switch(t.data.task){case"SET_PARAMS":this.setParams(t.data.params),!this.data.averageParsed.length&&Object.keys(this.params.fileSizes).length>0&&this.params.resolutions.length>0&&this.params.fileSizes[this.params.resolutions[this.params.resolutions.length-1]]>0&&this.params.packetSize&&!this.params.dataRequestPending?this.initialLoading(this.params.resolutions[this.params.resolutions.length-1]):!this.data.averageParsed.length&&Object.keys(this.params.fileSizes).length>0&&this.params.resolutions.length>0&&0===this.params.fileSizes[this.params.resolutions[this.params.resolutions.length-1]]&&this.sendMessage("EMPTY");break;case"APPEND":this.append(t.data.data);break;case"RENDER":var e=t.data.params;switch(e.type){case"average":this.renderAverage(e.viewWidth,e.viewHeight);break;case"candles":this.renderCandles(e.offset,e.exposition,e.viewWidth,e.viewHeight);break;default:break}break;case"RELOAD":this.returnEmptyData(),this.params.empty=!1,this.resetData(),this.requestInitialParams();break;default:break}}},{key:"sendMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;postMessage({type:t,body:e})}}]),t}(),u=new c;onmessage=function(t){u.messageHandler(t)}},dcbc:function(t,e,n){var r=n("2aba");t.exports=function(t,e,n){for(var a in e)r(t,a,e[a],n);return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e853:function(t,e,n){var r=n("d3f4"),a=n("1169"),i=n("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),r(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},ebd6:function(t,e,n){var r=n("cb7c"),a=n("d8e8"),i=n("2b4c")("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[i])?e:a(n)}},ec30:function(t,e,n){"use strict";if(n("9e1e")){var r=n("2d00"),a=n("7726"),i=n("79e5"),o=n("5ca1"),s=n("0f88"),c=n("ed0b"),u=n("9b43"),f=n("f605"),l=n("4630"),h=n("32e9"),d=n("dcbc"),p=n("4588"),v=n("9def"),g=n("09fa"),y=n("77f1"),m=n("6a99"),b=n("69a8"),w=n("23c6"),P=n("d3f4"),x=n("4bf8"),S=n("33a4"),E=n("2aeb"),O=n("38fd"),k=n("9093").f,T=n("27ee"),A=n("ca5a"),L=n("2b4c"),_=n("0a49"),M=n("c366"),j=n("ebd6"),R=n("cadf"),D=n("84f2"),I=n("5cc5"),F=n("7a56"),N=n("36bd"),W=n("ba92"),C=n("86cc"),U=n("11e9"),V=C.f,z=U.f,B=a.RangeError,q=a.TypeError,G=a.Uint8Array,H="ArrayBuffer",Y="Shared"+H,Q="BYTES_PER_ELEMENT",J="prototype",K=Array[J],X=c.ArrayBuffer,Z=c.DataView,$=_(0),tt=_(2),et=_(3),nt=_(4),rt=_(5),at=_(6),it=M(!0),ot=M(!1),st=R.values,ct=R.keys,ut=R.entries,ft=K.lastIndexOf,lt=K.reduce,ht=K.reduceRight,dt=K.join,pt=K.sort,vt=K.slice,gt=K.toString,yt=K.toLocaleString,mt=L("iterator"),bt=L("toStringTag"),wt=A("typed_constructor"),Pt=A("def_constructor"),xt=s.CONSTR,St=s.TYPED,Et=s.VIEW,Ot="Wrong length!",kt=_(1,function(t,e){return Mt(j(t,t[Pt]),e)}),Tt=i(function(){return 1===new G(new Uint16Array([1]).buffer)[0]}),At=!!G&&!!G[J].set&&i(function(){new G(1).set({})}),Lt=function(t,e){var n=p(t);if(n<0||n%e)throw B("Wrong offset!");return n},_t=function(t){if(P(t)&&St in t)return t;throw q(t+" is not a typed array!")},Mt=function(t,e){if(!(P(t)&&wt in t))throw q("It is not a typed array constructor!");return new t(e)},jt=function(t,e){return Rt(j(t,t[Pt]),e)},Rt=function(t,e){var n=0,r=e.length,a=Mt(t,r);while(r>n)a[n]=e[n++];return a},Dt=function(t,e,n){V(t,e,{get:function(){return this._d[n]}})},It=function(t){var e,n,r,a,i,o,s=x(t),c=arguments.length,f=c>1?arguments[1]:void 0,l=void 0!==f,h=T(s);if(void 0!=h&&!S(h)){for(o=h.call(s),r=[],e=0;!(i=o.next()).done;e++)r.push(i.value);s=r}for(l&&c>2&&(f=u(f,arguments[2],2)),e=0,n=v(s.length),a=Mt(this,n);n>e;e++)a[e]=l?f(s[e],e):s[e];return a},Ft=function(){var t=0,e=arguments.length,n=Mt(this,e);while(e>t)n[t]=arguments[t++];return n},Nt=!!G&&i(function(){yt.call(new G(1))}),Wt=function(){return yt.apply(Nt?vt.call(_t(this)):_t(this),arguments)},Ct={copyWithin:function(t,e){return W.call(_t(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(_t(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(_t(this),arguments)},filter:function(t){return jt(this,tt(_t(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(_t(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return at(_t(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){$(_t(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ot(_t(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(_t(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return dt.apply(_t(this),arguments)},lastIndexOf:function(t){return ft.apply(_t(this),arguments)},map:function(t){return kt(_t(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(_t(this),arguments)},reduceRight:function(t){return ht.apply(_t(this),arguments)},reverse:function(){var t,e=this,n=_t(e).length,r=Math.floor(n/2),a=0;while(a<r)t=e[a],e[a++]=e[--n],e[n]=t;return e},some:function(t){return et(_t(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(_t(this),t)},subarray:function(t,e){var n=_t(this),r=n.length,a=y(t,r);return new(j(n,n[Pt]))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,v((void 0===e?r:y(e,r))-a))}},Ut=function(t,e){return jt(this,vt.call(_t(this),t,e))},Vt=function(t){_t(this);var e=Lt(arguments[1],1),n=this.length,r=x(t),a=v(r.length),i=0;if(a+e>n)throw B(Ot);while(i<a)this[e+i]=r[i++]},zt={entries:function(){return ut.call(_t(this))},keys:function(){return ct.call(_t(this))},values:function(){return st.call(_t(this))}},Bt=function(t,e){return P(t)&&t[St]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},qt=function(t,e){return Bt(t,e=m(e,!0))?l(2,t[e]):z(t,e)},Gt=function(t,e,n){return!(Bt(t,e=m(e,!0))&&P(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?V(t,e,n):(t[e]=n.value,t)};xt||(U.f=qt,C.f=Gt),o(o.S+o.F*!xt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Gt}),i(function(){gt.call({})})&&(gt=yt=function(){return dt.call(this)});var Ht=d({},Ct);d(Ht,zt),h(Ht,mt,zt.values),d(Ht,{slice:Ut,set:Vt,constructor:function(){},toString:gt,toLocaleString:Wt}),Dt(Ht,"buffer","b"),Dt(Ht,"byteOffset","o"),Dt(Ht,"byteLength","l"),Dt(Ht,"length","e"),V(Ht,bt,{get:function(){return this[St]}}),t.exports=function(t,e,n,c){c=!!c;var u=t+(c?"Clamped":"")+"Array",l="get"+t,d="set"+t,p=a[u],y=p||{},m=p&&O(p),b=!p||!s.ABV,x={},S=p&&p[J],T=function(t,n){var r=t._d;return r.v[l](n*e+r.o,Tt)},A=function(t,n,r){var a=t._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),a.v[d](n*e+a.o,r,Tt)},L=function(t,e){V(t,e,{get:function(){return T(this,e)},set:function(t){return A(this,e,t)},enumerable:!0})};b?(p=n(function(t,n,r,a){f(t,p,u,"_d");var i,o,s,c,l=0,d=0;if(P(n)){if(!(n instanceof X||(c=w(n))==H||c==Y))return St in n?Rt(p,n):It.call(p,n);i=n,d=Lt(r,e);var y=n.byteLength;if(void 0===a){if(y%e)throw B(Ot);if(o=y-d,o<0)throw B(Ot)}else if(o=v(a)*e,o+d>y)throw B(Ot);s=o/e}else s=g(n),o=s*e,i=new X(o);h(t,"_d",{b:i,o:d,l:o,e:s,v:new Z(i)});while(l<s)L(t,l++)}),S=p[J]=E(Ht),h(S,"constructor",p)):i(function(){p(1)})&&i(function(){new p(-1)})&&I(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=n(function(t,n,r,a){var i;return f(t,p,u),P(n)?n instanceof X||(i=w(n))==H||i==Y?void 0!==a?new y(n,Lt(r,e),a):void 0!==r?new y(n,Lt(r,e)):new y(n):St in n?Rt(p,n):It.call(p,n):new y(g(n))}),$(m!==Function.prototype?k(y).concat(k(m)):k(y),function(t){t in p||h(p,t,y[t])}),p[J]=S,r||(S.constructor=p));var _=S[mt],M=!!_&&("values"==_.name||void 0==_.name),j=zt.values;h(p,wt,!0),h(S,St,u),h(S,Et,!0),h(S,Pt,p),(c?new p(1)[bt]==u:bt in S)||V(S,bt,{get:function(){return u}}),x[u]=p,o(o.G+o.W+o.F*(p!=y),x),o(o.S,u,{BYTES_PER_ELEMENT:e}),o(o.S+o.F*i(function(){y.of.call(p,1)}),u,{from:It,of:Ft}),Q in S||h(S,Q,e),o(o.P,u,Ct),F(u),o(o.P+o.F*At,u,{set:Vt}),o(o.P+o.F*!M,u,zt),r||S.toString==gt||(S.toString=gt),o(o.P+o.F*i(function(){new p(1).slice()}),u,{slice:Ut}),o(o.P+o.F*(i(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!i(function(){S.toLocaleString.call([1,2])})),u,{toLocaleString:Wt}),D[u]=M?_:j,r||M||h(S,mt,j)}}else t.exports=function(){}},ed0b:function(t,e,n){"use strict";var r=n("7726"),a=n("9e1e"),i=n("2d00"),o=n("0f88"),s=n("32e9"),c=n("dcbc"),u=n("79e5"),f=n("f605"),l=n("4588"),h=n("9def"),d=n("09fa"),p=n("9093").f,v=n("86cc").f,g=n("36bd"),y=n("7f20"),m="ArrayBuffer",b="DataView",w="prototype",P="Wrong length!",x="Wrong index!",S=r[m],E=r[b],O=r.Math,k=r.RangeError,T=r.Infinity,A=S,L=O.abs,_=O.pow,M=O.floor,j=O.log,R=O.LN2,D="buffer",I="byteLength",F="byteOffset",N=a?"_b":D,W=a?"_l":I,C=a?"_o":F;function U(t,e,n){var r,a,i,o=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,f=23===e?_(2,-24)-_(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=L(t),t!=t||t===T?(a=t!=t?1:0,r=c):(r=M(j(t)/R),t*(i=_(2,-r))<1&&(r--,i*=2),t+=r+u>=1?f/i:f*_(2,1-u),t*i>=2&&(r++,i/=2),r+u>=c?(a=0,r=c):r+u>=1?(a=(t*i-1)*_(2,e),r+=u):(a=t*_(2,u-1)*_(2,e),r=0));e>=8;o[l++]=255&a,a/=256,e-=8);for(r=r<<e|a,s+=e;s>0;o[l++]=255&r,r/=256,s-=8);return o[--l]|=128*h,o}function V(t,e,n){var r,a=8*n-e-1,i=(1<<a)-1,o=i>>1,s=a-7,c=n-1,u=t[c--],f=127&u;for(u>>=7;s>0;f=256*f+t[c],c--,s-=8);for(r=f&(1<<-s)-1,f>>=-s,s+=e;s>0;r=256*r+t[c],c--,s-=8);if(0===f)f=1-o;else{if(f===i)return r?NaN:u?-T:T;r+=_(2,e),f-=o}return(u?-1:1)*r*_(2,f-e)}function z(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function B(t){return[255&t]}function q(t){return[255&t,t>>8&255]}function G(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function H(t){return U(t,52,8)}function Y(t){return U(t,23,4)}function Q(t,e,n){v(t[w],e,{get:function(){return this[n]}})}function J(t,e,n,r){var a=+n,i=d(a);if(i+e>t[W])throw k(x);var o=t[N]._b,s=i+t[C],c=o.slice(s,s+e);return r?c:c.reverse()}function K(t,e,n,r,a,i){var o=+n,s=d(o);if(s+e>t[W])throw k(x);for(var c=t[N]._b,u=s+t[C],f=r(+a),l=0;l<e;l++)c[u+l]=f[i?l:e-l-1]}if(o.ABV){if(!u(function(){S(1)})||!u(function(){new S(-1)})||u(function(){return new S,new S(1.5),new S(NaN),S.name!=m})){S=function(t){return f(this,S),new A(d(t))};for(var X,Z=S[w]=A[w],$=p(A),tt=0;$.length>tt;)(X=$[tt++])in S||s(S,X,A[X]);i||(Z.constructor=S)}var et=new E(new S(2)),nt=E[w].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||c(E[w],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else S=function(t){f(this,S,m);var e=d(t);this._b=g.call(new Array(e),0),this[W]=e},E=function(t,e,n){f(this,E,b),f(t,S,b);var r=t[W],a=l(e);if(a<0||a>r)throw k("Wrong offset!");if(n=void 0===n?r-a:h(n),a+n>r)throw k(P);this[N]=t,this[C]=a,this[W]=n},a&&(Q(S,I,"_l"),Q(E,D,"_b"),Q(E,I,"_l"),Q(E,F,"_o")),c(E[w],{getInt8:function(t){return J(this,1,t)[0]<<24>>24},getUint8:function(t){return J(this,1,t)[0]},getInt16:function(t){var e=J(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=J(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return z(J(this,4,t,arguments[1]))},getUint32:function(t){return z(J(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return V(J(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return V(J(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){K(this,1,t,B,e)},setUint8:function(t,e){K(this,1,t,B,e)},setInt16:function(t,e){K(this,2,t,q,e,arguments[2])},setUint16:function(t,e){K(this,2,t,q,e,arguments[2])},setInt32:function(t,e){K(this,4,t,G,e,arguments[2])},setUint32:function(t,e){K(this,4,t,G,e,arguments[2])},setFloat32:function(t,e){K(this,4,t,Y,e,arguments[2])},setFloat64:function(t,e){K(this,8,t,H,e,arguments[2])}});y(S,m),y(E,b),s(E[w],o.VIEW,!0),e[m]=S,e[b]=E},f605:function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},f751:function(t,e,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})},fab2:function(t,e,n){var r=n("7726").document;t.exports=r&&r.documentElement}});